<?xml version="1.0"?>
<odoo>

  <record id="registration_template_loginonly" model="ir.ui.view">
    <field name="inherit_id" ref="website_event.registration_template"/>
    <field name="priority">99</field>
    <field name="arch" type="xml">
      <xpath expr="//select[@name='nb_register-0']" position="replace">
        <div t-if="event.website_attendee_require_login">
          <t t-if="event.seats_availability == 'unlimited' or event.seats_available > 0">
            <t t-if="event.seats_availability != 'unlimited'">
              Seats available: <strong t-esc="event.seats_available"></strong>
            </t>
            <select name="nb_register-0" class="form-control" style="display:none;">
              <option selected="1" value="1">1</option>
            </select>
          </t>
        </div>
        <select t-else="" name="nb_register-0" class="form-control">
          <t t-foreach="range(0, (event.seats_availability == 'unlimited' or event.seats_available &gt; 9) and 10 or event.seats_available+1)" t-as="nb">
            <option t-esc="nb" t-att-selected="nb == 1 and 'selected'"/>
          </t>
        </select>        
      </xpath>
      <xpath expr="//div[@class='card-footer']/div[1]" position="replace">
        <div class="row">
          <span t-if="(event.website_attendee_require_login and event.is_participating)==true" class="alert alert-warning">You already registered for a ticket on this account - Contact us if you wish to cancel</span>
          <div t-else="" class="col-lg-4 offset-lg-8 col-xl-3 offset-xl-9">
            <button type="submit" class="btn btn-primary btn-lg btn-block a-submit" t-attf-id="#{event.id}"> Register&amp;nbsp;</button>
          </div>
        </div>
      </xpath>
    </field>
  </record>

</odoo>
